<?xml version="1.0" encoding="UTF-8"?>
<!DOCTYPE mapper PUBLIC "-//mybatis.org//DTD Mapper 3.0//EN" "http://mybatis.org/dtd/mybatis-3-mapper.dtd">
<mapper namespace="com.app.ggshop.v1.mapper.car.CarMapper">
    <insert id="insertCar" useGeneratedKeys="true" keyProperty="id">
        insert into tbl_car (car_plate_number, car_filter, car_member_id) values (#{carPlateNumber}, #{carFilter.value}, #{carMemberId})
    </insert>
    <update id="deleteCar">
        update tbl_car
        set car_status = 'inactive', updated_date = current_timestamp()
        where car_member_id = #{carMemberId}
        and car_status = 'active'
    </update>
    <select id="selectCarByMemberId" resultType="CarDTO">
        select id, car_plate_number, car_filter, car_status, car_member_id
        from tbl_car
        where car_member_id = #{carMemberId}
        and car_status = 'active'
        limit 1
    </select>
</mapper>